<div ng-controller="businessManagement.customers.document" style="padding-top:20px;">
  <div class="col-md-12">
    <div class="row" ng-if="custDetails.pk!=none">
      <div class="col-md-3">
        <div class="btn btn-block {{docForm!=none&&docForm.title.length==0?'btn-warning':'btn-default'}}" ng-click="addDoc(-1)" style="font-size:18px">
          Add Document &nbsp;<i class="fa fa-plus fa-lg"></i>
        </div>
      </div>
      <div class="col-md-8" style="display:inline">
        <h3 style="margin-top:0px">Company name : {{compDetails.name}}</h3>
        <h4>Contact Person: {{compDetails.contactPerson.first_name}} {{compDetails.contactPerson.last_name}}</h4>
      </div>
    </div>
    <div class="row" ng-if="custDetails.pk==none">
      <div class="col-md-12">
        <div class="text-center" style="font-size:20px">
          Please Create Customer Profile First (Like Support Details)
        </div>
      </div>
    </div>
    <hr>
    <div class="row" style="padding-top:15px">
      <div class="col-md-3">
        <div class="row" style="border-right:solid 2px #e0e0e0;min-height:54vh;position:relative;" ng-if="custDocs.length>0||docForm!=none">
          <div class="row container-fluid card" ng-repeat="doc in custDocs" ng-click="addDoc($index)" style="cursor:pointer;margin:10px ;padding:15px; height:80px; {{docForm.pk==doc.pk?'background-color:#ffb22b':'background-color: #e9e9e9 !important;'}}">
            <div style="font-size:20px;padding:10px;margin-top:-17px;margin-left:-10px;opacity:0.7;margin-bottom:7px"><b>{{doc.title}}</b></div>
            <ul style="list-style:none;margin-bottom:-10px;font-size:12px;opacity:0.7;" class="list-inline">
              <li>Last modified:<b> {{doc.updated  | date:'dd-MMM-yyyy'}}</b></li>
              <li ng-if="doc.process.text">Process:<b> {{doc.process.text}}</b></li>
              <li>Versions:<b> {{doc.version_count}}</b></li>
            </ul>
          </div>
          <!-- <div class="row container-fluid card" ng-repeat="doc in custDocs" ng-click="addDoc($index)" style="cursor:pointer;margin:10px; {{docForm.pk==doc.pk?'background-color:#ffb22b':'background-color: #e9e9e9 !important;'}}">
            <div class="text-center" style="font-size:20px;padding:10px"><b>{{doc.title}}</b></div>
            <ul style="list-style:none;position:absolute;bottom:-15px;left:0px;font-size:14px" class="list-inline">
              <li>Last modified:<b> 7:27</b></li>
              <li>Process:<b> abc</b></li>
              <li>Versions:<b> 4</b></li>
            </ul>
          </div> -->
        </div>
      </div>
      <div class="col-md-9" style="padding-left:35px" ng-if="docForm!=none">
        <div class="row text-center">
          <h4>{{docForm.pk!=none?'Edit':'Create'}} Document <span ng-if="docForm.pk!=none">- {{docForm.title}}</span></h4>
        </div>
        <div class="row">
          <div class="form-group">
            <label>Title</label>
            <input type="text " class="form-control" ng-model="docForm.title">
          </div>
          <div class="row">
          <div class="col-md-9">
          <div class="form-group" ng-if="docForm.text!=null">
            <label>Content</label>
            <textarea ui-tinymce="tinymceOptions" ng-model="docForm.text"></textarea>
          </div>
          </div>
          <div class="col-md-3" ng-if="docForm.text!=null">
            <uib-tabset>
              <uib-tab>
                <uib-tab-heading>
                  Article
                </uib-tab-heading>
                <div>
                  <div class="row">
                    <label>Process:</label>
                    <input type="text" class="form-control"  ng-model="docForm.process" uib-typeahead="process as process.text for process in processSearch($viewValue)"/>
                  </div>
                  <div class="row">
                    <label>Article Owner</label>
                    <input type="text" class="form-control"  ng-model="docForm.articleOwner" uib-typeahead="user as user.username for user in userSearch($viewValue)"/>
                  </div>
                  <!-- <p style="color:red;margin:20px 0px;">Display permission</p>
                      <ul class="list-inline versions"  style="font-size:15px" ng-init="type='agents'">
                        <li  style="padding:0px"><button style="padding:8px;border-radius:10px" class="{{type=='agents' ? 'active' : ''}}" ng-click="type='agents'">Agents</button></li>
                        <li style="padding:0px"><button style="padding:8px; border-radius:10px" class="{{type=='reg' ? 'active' : ''}}" ng-click="type='reg'">Reg. users</button></li>
                        <li style="padding:0px"><button style="padding:8px;border-radius:10px" class="{{type=='all' ? 'active' : ''}}" ng-click="type='all'">All users</button></li>
                      </ul> -->

                </div>
              </uib-tab>
              <uib-tab>
                  <uib-tab-heading>
                      TOC
                  </uib-tab-heading>
                  <div class="toc">
                    <ol style="margin:20px 0px;">
                      <li style="color:  #5257d2;font-size:20px;" ng-repeat="x in h1_array" ng-if="$index!=0">{{x.title}}
                        <ol>
                          <li style="margin:10px 0px;color:black;font-size:15px"ng-repeat="y in x.childeren" ng-if="$index!=0">{{y.title}}</li>
                        </ol>
                      </li>
                    </ol>
                  </div>

              </uib-tab>
              <uib-tab>
                  <uib-tab-heading>
                      Versions
                  </uib-tab-heading>
                  <div class="versions" style="margin:30px 0px">
                    <div ng-repeat='version in versions' >
                      <buttonstyle="width:100%;padding:7px;border-radius:10px !important;backgroundColor: #ddddde !important;margin:2px;"ng-class="{active : activeVersion === version}" ng-click="setActiveVersion(version)"> {{version.title}}</button>
                    </div>

                  </div>
              </uib-tab>
            </uib-tabset>
          </div>
        </div>
          <div class="form-group" ng-if="docForm.docs!=null">
            <label>Document</label>
            <input type="file" file-model="docForm.docs">
          </div>

        </div>
        <div class="row" style="padding:20px">
          <div class="col-md-2 col-md-offset-5">
            <div class="btn btn-block btn-success" style="font-size:18px" ng-click="saveDoc()">
              Save Document
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
