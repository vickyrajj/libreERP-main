<div class="row" style="margin-top:30px">
  <div class="col-md-12 text-left" style="margin-bottom:35px">
    <div class="col-md-3" >
      <h3><strong>Comm nr : </strong>{{cmrData.comm_nr}}</h3>
      <h3 ng-if="cmrData.totalOrdered>0"><strong>Total Ordered : </strong>{{cmrData.totalOrdered.toFixed(2)}}</h3>
      <h3 ng-if="cmrData.totalOrdered>0"><strong>Total Consumed : </strong>{{cmrData.totalConsumed.toFixed(2)}}</h3><br>
    </div>
    <div class="col-md-9" ng-if="cmrData.totalOrdered>0">
      <canvas id="pie" class="chart chart-pie" chart-data="[cmrData.totalOrdered,cmrData.totalConsumed]" chart-labels="['Total Ordered','Total Consumed']" chart-options="{legend: { display: true }}" chart-colors="['#90EE90', '#FF6600']" height="50vh"></canvas>
    </div>
  </div>
  <div class="col-md-6" style="padding-bottom:20px;padding-left:10px;padding-right:10px;" ng-click="cmrTableAction($index,'details');$event.stopPropagation();" ng-repeat="cdt in cmrData.serializerData">
    <div class="container-fluid card" style="border: 3px solid {{cdt.status=='created'?'#b8b5b3':''}}{{cdt.status=='sent_for_approval'?'#F08080':''}}{{cdt.status=='approved'?'#449d44':''}}{{cdt.status=='ongoing'?'#337ab7':''}};cursor:pointer;background-color:{{cdt.colorCode}}">
      <div class="row text-center" style="height:6vh;">

        <div class="col-md-11" style="position:relative;display:block;">
          <div class="row" style="padding-left:10px;">
            <h2>{{cdt.title}}</h2>
          </div>
        </div>
      </div>
      <div class="row container-fluid" style="padding-top:20px;height:12vh;">
        <div class="col-md-5" style="z-index: 1;">
          <div class="row">
            <div class="col-md-5">
              <span style="font-size:15px;"><strong> Customer </strong>:</span>
            </div>
            <div class="col-md-7">
              <span>  {{cdt.service.name}}</span>
            </div>
          </div>
          <div class="row">
            <div class="col-md-5">
              <span style="font-size:15px;"><strong>Number  </strong>:</span>
            </div>
            <div class="col-md-7">
              <span>{{cdt.service.mobile}}</span>
            </div>
          </div>
          <div class="row">
            <div class="col-md-5">
              <span style="font-size:15px;"><strong> Email </strong>:</span>
            </div>
            <div class="col-md-7">
              <span>  {{cdt.service.email}}</span>
            </div>
          </div>
          <div class="row">
            <div class="col-md-5">
              <span style="font-size:15px;"><strong> Vendor </strong>:</span>
            </div>
            <div class="col-md-7">
              <span>  {{cdt.vendor.name}}</span>
            </div>
          </div>
          <div class="row">
            <div class="col-md-5">
              <span style="font-size:15px;"><strong> Stage </strong>:</span>
            </div>
            <div class="col-md-7">
              <span>  {{cdt.status}}</span>
            </div>
          </div>

          <div class="row">
            <div class="col-md-5">
              <span style="font-size:15px;"><strong> Enquiry Ref  </strong>:</span>
            </div>
            <div class="col-md-7">
              <span>  {{cdt.enquiry_ref}}</span>
            </div>
          </div>
          <div class="row">
            <div class="col-md-5">
              <span><strong>Closing date </strong>: </span>
            </div>
            <div class="col-md-7">
              <span>{{cdt.date}}</span>
            </div>
          </div>
        </div>
        <div class="col-md-6">
          <canvas id="pie" class="chart chart-pie" chart-data="[cdt.total_po,cdt.total_material]" chart-labels="['Ordered','Consumed']" chart-labels="['Ordered','Consumed']" chart-options="{legend: { display: true }}" chart-colors="['#90EE90', '#FF6600']" ng-if="cdt.total_po>0"></canvas>
        </div>

        <div class="col-md-1">
          <div style="padding-right:20px;">
            <div class="row">
              <span class="pull-right" style="cursor:pointer;" ng-click="cmrTableAction($index,'edit');$event.stopPropagation();">
              <i class="fa fa-pencil fa-2x" style="margin-top:0px;"></i>
            </span>
            </div>
            <div class="row">
              <span class="pull-right" style="cursor:pointer;" ng-click="$event.stopPropagation()" mwl-confirm title="Delete" message="Are you sure?" confirm-text="Yes <i class='fa fa-check'></i>" cancel-text="No" on-confirm="cmrTableAction($index,'delete');" confirm-button-type="default"
                cancel-button-type="default"></i>
              <i class="fa fa-trash fa-2x" style="margin-top:15px;"></i>
            </span>
            </div>

          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="col-md-12" style="margin-top:30px" ng-if="cmrData.totalPo>0">
    <div class="col-md-12 text-right" style="font-size:26px">
      <strong>Total PO : </strong>{{cmrData.totalPo.toFixed(2)}}
    </div>

    <table class="invoiceTable" style=" width: 100%;">
      <thead>
        <tr style="background-color: #eeeeee;height: 96px;">
          <th>Product</th>
          <th>Part No</th>
          <th>Weight</th>
          <th> Qty</th>
          <th>HSN</th>
          <th>Price</th>
          <th>Quote Price (CHF)</th>
          <th>Ex-Work Price (INR)</th>
          <th>Packing Cost</th>
          <th>Insurance</th>
          <th>Freight</th>
          <th>CIF/Pc</th>
          <th>Total CIF</th>
          <th>CD (%)</th>
          <th>CD value</th>
          <th>SWE</th>
          <th>GST (%)</th>
          <th>GST </th>
          <th>CC 1 </th>
          <th>CC 2 </th>
          <th>Landing Cost/pc </th>
          <th> Qty Received</th>
        </tr>
      </thead>
      <tbody ng-repeat="(k,v) in cmrData.cmrTableData">

        <tr ng-repeat="r in v" style="background-color:{{r.colorCode}}">
          <td>{{r.productDesc1}}<span ng-if="r.productDesc2"> &nbsp({{r.productDesc2}})</span></td>
          <td>{{r.partNo}}</td>
          <td>{{r.weight}}</td>
          <td>{{r.qty1}}</td>
          <td>{{r.hsn}}</td>
          <td style="text-align:right">{{r.price| number}}</td>
          <td>{{r.qtPrice| number}}</td>
          <td>{{r.wkPrice| number}}</td>
          <td>{{r.packingCost| number}}</td>
          <td>{{r.insurance| number}}</td>
          <td>{{r.freight| number}}</td>
          <td>{{r.cifPc| number}}</td>
          <td>{{r.totcif | number}}</td>
          <td>{{r.cdperc}}</td>
          <td >{{r.cdVal| number}} </td>
          <td>{{r.swe| number}}</td>
          <td>{{r.gst}} </td>
          <td>{{r.gstVal| number}} </td>
          <td>{{r.cc1| number}} </td>
          <td>{{r.cc2| number}} </td>
          <td>{{r.landingCost| number}}</td>
          <td>{{r.qty2}}</td>
        </tr>
      </tbody>
    </table>

  </div>
</div>
